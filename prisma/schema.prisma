generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String     @id @default(cuid())
  email               String     @unique
  name                String?
  password            String?    // For credentials sign-in
  subscription_status String     @default("FREE")
  isExtAuth           Boolean    @default(false)
  locations           Location[]
  alerts              WeatherAlert[]
}

model Location {
  id         String          @id @default(cuid())
  user       User            @relation(fields: [userId], references: [id])
  userId     String
  city       String
  country    String
  is_primary Boolean         @default(false)
  alerts     WeatherAlert[]
}

model WeatherAlert {
  id          String      @id @default(cuid())
  user        User        @relation(fields: [userId], references: [id])
  userId      String
  location    Location    @relation(fields: [locationId], references: [id])
  locationId  String
  condition   String      // e.g., "temperature"
  threshold   Float       // e.g., 30.0 for 30 degrees
}
